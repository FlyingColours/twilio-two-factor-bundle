services:

    fc.twilio.client:
        class: Twilio\Rest\Client
        arguments: [ "%flying_colours_twilio_two_factor.twilio.username%", "%flying_colours_twilio_two_factor.twilio.password%"]

    fc.security.twilio.form_renderer:
        class: Scheb\TwoFactorBundle\Security\TwoFactor\Provider\DefaultTwoFactorFormRenderer
        arguments: [ "@twig", "%flying_colours_twilio_two_factor.form_template%"]

    fc.twilio.two_factor.provider:
        class: FlyingColours\TwilioTwoFactorBundle\Security\TwoFactor\Provider\TwilioProvider
        arguments: [ "@event_dispatcher", "@session", "@fc.security.twilio.form_renderer"]
        tags:
            - { name: scheb_two_factor.provider, alias: twilio_two_factor }

    fc.twilio_fa_start.subscriber:
        class: FlyingColours\TwilioTwoFactorBundle\EventListener\TwoFaStartSubscriber
        arguments: [ "@fc.twilio.client", "@session", { sms_from: "%flying_colours_twilio_two_factor.config.sms_from%", sms_message: "%flying_colours_twilio_two_factor.config.sms_message%" }]
        tags:
            - { name: kernel.event_subscriber }
